# Заметки Tech Lead - 2026-02-06

## Выполненные задачи (v0.4.0)

Реализованы критические обновления по Issues #9, #10, #11, #12.

### 1. Исправление бага ложного Game Over (Issue #10)
- **Проблема:** Новая фигура спавнилась мгновенно после блокировки предыдущей, не дожидаясь завершения анимации очистки линий. Если поле было заполнено до верха, это вызывало ложный Game Over.
- **Решение:** 
    - В `Board.gd` добавлен сигнал `no_lines_cleared`.
    - В `GameManager.gd` спавн новой фигуры перенесен в обработчики `_on_lines_cleared` (после анимации) и `_on_no_lines_cleared`.
    - Таймер падения останавливается на время обработки блокировки/очистки.

### 2. Ландшафтный режим и адаптация UI (Issue #11)
- **Изменения:**
    - Разрешение проекта изменено на **1280x720** (Landscape).
    - Оптимизированы настройки рендеринга (`forward_plus`).
    - Переработана сцена `Main.tscn`: игровое поле центрировано, элементы UI (счет, уровень, превью) разнесены по сторонам для удобства на ПК.
    - Увеличены шрифты для лучшей читаемости.

### 3. Система уровней и прогрессия (Issue #12)
- **Механика:**
    - Уровень повышается каждые 10 очищенных линий.
    - Скорость падения увеличивается (wait_time уменьшается на 0.05s за уровень, минимум 0.1s).
    - Формула очков обновлена: `100 * линии * уровень`.
    - В UI добавлен индикатор текущего уровня.

### 4. Аудио-система (Issue #9)
- **Инфраструктура:**
    - Создан `AudioManager` (Autoload/Singleton).
    - Подготовлены шины `Music` и `SFX`.
    - Добавлены методы для проигрывания музыки и звуков.
    - Создана структура папок `assets/audio/music` и `assets/audio/sfx`.

## Архитектурные решения
- Переход на сигнальную модель взаимодействия `Board` -> `GameManager` для управления последовательностью игрового цикла (lock -> animation -> spawn).
- Использование Autoload для `AudioManager` обеспечивает непрерывное звучание при смене сцен.

## Статус PR
- PR #19 успешно замержен в `main`.
